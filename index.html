<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>SQL Mad Minutes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: Arial, sans-serif; background:#111; color:#eee; padding:20px; max-width: 900px; margin:0 auto; }
    button { padding:10px 14px; margin:6px 6px 6px 0; cursor:pointer; }
    pre { background:#222; padding:14px; border-radius:8px; }
    input {
      padding:10px; width: min(520px, 95%);
      border-radius: 8px; border: 1px solid #444;
      background:#181818; color:#eee; font-size: 15px;
    }
    .row { margin: 10px 0; }
    .hint { opacity:0.85; font-size: 13px; }
    .ok { color: #7CFC9A; font-weight: bold; }
    .bad { color: #FF7C7C; font-weight: bold; }
    .chip { display:inline-block; padding:4px 10px; border:1px solid #444; border-radius:999px; margin-left:8px; font-size:12px; opacity:.9;}
  </style>
</head>
<body>

<h1>SQL Mad Minutes</h1>
<p class="hint">
  Type the missing syntax for the <b>____</b> blank, then click <b>Check Answer</b>.
  (SQLite / DBeaver aligned)
</p>

<div class="row">
  <button onclick="nextQ()">Next Question</button>
  <button onclick="reveal()">Reveal Answer</button>
</div>

<pre id="ctx" class="hint"></pre>
<pre id="goal" class="hint"></pre>
  
<pre id="q">Click “Next Question” to begin…</pre>

<div class="row">
  <label for="ans"><b>Your answer:</b></label><br>
  <input id="ans" type="text" placeholder="Type the missing keyword/operator… (e.g., WHERE)" autocomplete="off">
</div>

<div class="row">
  <button onclick="check()">Check Answer</button>
  <span id="result" class="chip">—</span>
</div>

<pre id="explain" style="display:none;"></pre>

<script>
/*
  For now: demo set (5 questions).
  After you confirm the input works, we’ll drop in the full 75 SQLite-safe bank.
*/
const questions = [
  // ===== Round 1: Core =====
  { q: "____ * FROM customers;", a: "SELECT", topic: "R1 SELECT" },
  { q: "SELECT customer_name, ____ FROM customers;", a: "city", topic: "R1 Columns" },
{
  ctx: "customers(customer_id, customer_name, city, country, email)",
  goal: "Return each country only once",
  q: "SELECT ____ country FROM customers;",
  a: "DISTINCT",
  topic: "R1 DISTINCT"
},
  { q: "SELECT * FROM customers ____ country = 'Canada';", a: "WHERE", topic: "R1 WHERE" },
  { q: "SELECT * FROM customers WHERE country ____ 'Canada';", a: "=", topic: "R1 Operator" },
  { q: "SELECT * FROM customers WHERE country='Canada' ____ city='Calgary';", a: "AND", topic: "R1 AND" },
  { q: "SELECT * FROM customers WHERE country='Canada' ____ country='USA';", a: "OR", topic: "R1 OR" },
  { q: "SELECT * FROM customers WHERE ____ country='Canada';", a: "NOT", topic: "R1 NOT" },
  { q: "SELECT * FROM customers ORDER BY city ____;", a: "ASC", topic: "R1 ORDER BY" },
  { q: "SELECT * FROM customers ORDER BY city ____;", a: "DESC", topic: "R1 ORDER BY" },
  { q: "SELECT * FROM orders ____ 10;", a: "LIMIT", topic: "R1 LIMIT" },
  { q: "SELECT * FROM customers WHERE email ____ NULL;", a: "IS", topic: "R1 NULL" },
  { q: "SELECT * FROM customers WHERE email IS ____ NULL;", a: "NOT", topic: "R1 NULL" },
  { q: "SELECT * FROM customers WHERE city ____ 'A%';", a: "LIKE", topic: "R1 LIKE" },
  { q: "SELECT * FROM customers WHERE country ____ ('Canada','USA');", a: "IN", topic: "R1 IN" },
  { q: "SELECT * FROM products WHERE price ____ 10 AND 20;", a: "BETWEEN", topic: "R1 BETWEEN" },
  { q: "SELECT * FROM customers WHERE city <> 'Calgary' ____ city <> 'Edmonton';", a: "AND", topic: "R1 Logic" },
  { q: "SELECT * FROM products WHERE price >= 100 ____ price <= 200;", a: "AND", topic: "R1 Comparisons" },
  { q: "SELECT * FROM orders WHERE order_date ____ '2025-01-01';", a: ">", topic: "R1 Date Compare" },
  { q: "SELECT * FROM orders WHERE order_date ____ '2025-01-01';", a: "<", topic: "R1 Date Compare" },
  { q: "SELECT customer_name ____ name FROM customers;", a: "AS", topic: "R1 Alias" },
  { q: "SELECT * FROM customers WHERE city LIKE 'S____';", a: "%", topic: "R1 LIKE %" },
  { q: "SELECT * FROM products WHERE price NOT BETWEEN 10 AND 20 ____ price IS NULL;", a: "OR", topic: "R1 NOT BETWEEN" },
  { q: "SELECT * FROM customers WHERE (city='Calgary' ____ city='Edmonton') AND country='Canada';", a: "OR", topic: "R1 Parentheses" },
  { q: "SELECT * FROM customers ORDER BY country ASC, city ____;", a: "ASC", topic: "R1 Multi-ORDER" },

  // ===== Round 2: Aggregates & Grouping =====
  { q: "SELECT ____ (*) FROM customers;", a: "COUNT", topic: "R2 COUNT" },
  { q: "SELECT ____ (price) FROM products;", a: "MIN", topic: "R2 MIN" },
  { q: "SELECT ____ (price) FROM products;", a: "MAX", topic: "R2 MAX" },
  { q: "SELECT ____ (price) FROM products;", a: "AVG", topic: "R2 AVG" },
  { q: "SELECT ____ (price) FROM products;", a: "SUM", topic: "R2 SUM" },
  { q: "SELECT country, COUNT(*) FROM customers GROUP BY ____;", a: "country", topic: "R2 GROUP BY" },
  { q: "SELECT city, COUNT(*) FROM customers GROUP BY city HAVING COUNT(*) ____ 2;", a: ">=", topic: "R2 HAVING" },
  { q: "SELECT customer_id, COUNT(*) FROM orders GROUP BY customer_id HAVING COUNT(*) ____ 1;", a: ">", topic: "R2 Duplicates" },
  { q: "SELECT product_id, AVG(rating) FROM reviews GROUP BY product_id HAVING AVG(rating) ____ 4;", a: ">=", topic: "R2 HAVING AVG" },
  { q: "SELECT customer_id, SUM(total_amount) FROM orders GROUP BY customer_id HAVING SUM(total_amount) ____ 500;", a: ">=", topic: "R2 HAVING SUM" },
  { q: "SELECT country, COUNT(*) FROM customers GROUP BY country ORDER BY COUNT(*) ____;", a: "DESC", topic: "R2 ORDER BY agg" },
  { q: "SELECT * FROM customers WHERE email IS ____ NULL;", a: "NOT", topic: "R2 NULL" },
  { q: "SELECT * FROM customers WHERE customer_name LIKE '%son' ____ customer_name LIKE '%sen';", a: "OR", topic: "R2 LIKE OR" },
  { q: "SELECT * FROM customers WHERE city LIKE 'A%'; -- wildcard for any length is ____", a: "%", topic: "R2 LIKE %" },
  { q: "SELECT * FROM customers WHERE country='Canada' ____ city IN ('Calgary','Edmonton');", a: "AND", topic: "R2 AND + IN" },
  { q: "SELECT * FROM orders WHERE status ____ 'Cancelled';", a: "<>", topic: "R2 Not equal" },
  { q: "SELECT * FROM products WHERE price BETWEEN 10 AND 20 ORDER BY price ____;", a: "ASC", topic: "R2 BETWEEN" },
  { q: "SELECT COUNT(*) FROM orders WHERE status='Shipped' ____ status='Delivered';", a: "OR", topic: "R2 COUNT filter" },
  { q: "SELECT * FROM orders WHERE order_date BETWEEN '2025-01-01' AND '2025-12-31' ____ status='Delivered';", a: "AND", topic: "R2 Date range" },
  { q: "SELECT city, COUNT(*) FROM customers GROUP BY city HAVING COUNT(*) BETWEEN 2 AND 5 ORDER BY COUNT(*) ____;", a: "DESC", topic: "R2 HAVING BETWEEN" },
  { q: "SELECT * FROM products WHERE price > (SELECT AVG(price) FROM products) ORDER BY price DESC ____ 5;", a: "LIMIT", topic: "R2 Subquery" },
  { q: "SELECT customer_id, COUNT(*) FROM orders GROUP BY customer_id HAVING COUNT(*) <> 0 ORDER BY customer_id ____;", a: "ASC", topic: "R2 Sort" },
  { q: "SELECT * FROM customers WHERE country IN ('Canada','USA') ORDER BY country ____;", a: "ASC", topic: "R2 ORDER BY" },
  { q: "SELECT * FROM customers WHERE city NOT IN ('Calgary','Edmonton') ORDER BY city ASC ____ 5;", a: "LIMIT", topic: "R2 NOT IN" },
  { q: "SELECT country, COUNT(*) AS total FROM customers GROUP BY country HAVING total ____ 10;", a: ">", topic: "R2 HAVING alias" },

  // ===== Round 3: JOINs (SQLite-safe) =====
  { q: "SELECT * FROM orders o ____ JOIN customers c ON o.customer_id = c.customer_id;", a: "INNER", topic: "R3 INNER JOIN" },
  { q: "SELECT * FROM customers c ____ JOIN orders o ON c.customer_id = o.customer_id;", a: "LEFT", topic: "R3 LEFT JOIN" },
  { q: "SELECT o.order_id, c.customer_name FROM orders o INNER JOIN customers c ____ o.customer_id = c.customer_id;", a: "ON", topic: "R3 ON" },
  { q: "SELECT oi.order_id, p.product_name FROM order_items oi INNER JOIN products p ON oi.product_id = p.product_id ____ oi.quantity > 1;", a: "WHERE", topic: "R3 JOIN + WHERE" },
  { q: "SELECT o.order_id, c.customer_name FROM orders o INNER JOIN customers c ON o.customer_id=c.customer_id ORDER BY o.order_id ____;", a: "ASC", topic: "R3 ORDER BY" },
  { q: "SELECT c.customer_name, o.order_id FROM customers c LEFT JOIN orders o ON c.customer_id=o.customer_id WHERE o.order_id IS ____ NULL;", a: "NOT", topic: "R3 NULL filter" },
  { q: "SELECT c.customer_name, o.order_id FROM customers c LEFT JOIN orders o ON c.customer_id=o.customer_id WHERE o.order_id IS NULL;", a: "IS", topic: "R3 Unmatched" },
  { q: "SELECT o.order_id, oi.quantity FROM orders o INNER JOIN order_items oi ON o.order_id = oi.order_id WHERE oi.quantity ____ 0;", a: ">", topic: "R3 Comparison" },
  { q: "SELECT p.product_name, oi.quantity FROM products p INNER JOIN order_items oi ON p.product_id=oi.product_id ORDER BY oi.quantity ____;", a: "DESC", topic: "R3 Sort" },
  { q: "SELECT o.order_id, c.customer_name FROM orders o INNER JOIN customers c ON o.customer_id=c.customer_id WHERE c.country = 'Canada' ____ o.status='Delivered';", a: "AND", topic: "R3 AND" },
  { q: "SELECT o.order_id, c.customer_name FROM orders o INNER JOIN customers c ON o.customer_id=c.customer_id WHERE c.country='Canada' ____ c.country='USA';", a: "OR", topic: "R3 OR" },
  { q: "SELECT o.order_id, c.customer_name FROM orders o INNER JOIN customers c ON o.customer_id=c.customer_id WHERE NOT c.country='Canada';", a: "NOT", topic: "R3 NOT" },
  { q: "SELECT c.customer_name, COUNT(o.order_id) FROM customers c LEFT JOIN orders o ON c.customer_id=o.customer_id GROUP BY c.customer_name HAVING COUNT(o.order_id) ____ 1;", a: ">", topic: "R3 GROUP + HAVING" },
  { q: "SELECT c.customer_name, COUNT(o.order_id) AS total FROM customers c LEFT JOIN orders o ON c.customer_id=o.customer_id GROUP BY c.customer_name ORDER BY total ____;", a: "DESC", topic: "R3 ORDER BY alias" },
  { q: "SELECT o.order_id, SUM(oi.quantity) FROM orders o INNER JOIN order_items oi ON o.order_id=oi.order_id GROUP BY o.order_id HAVING SUM(oi.quantity) ____ 3;", a: ">=", topic: "R3 HAVING SUM" },
  { q: "SELECT p.product_name, AVG(r.rating) FROM products p INNER JOIN reviews r ON p.product_id=r.product_id GROUP BY p.product_name HAVING AVG(r.rating) ____ 4;", a: ">=", topic: "R3 AVG" },
  { q: "SELECT p.product_name, r.rating FROM products p INNER JOIN reviews r ON p.product_id=r.product_id WHERE r.rating ____ 5;", a: "=", topic: "R3 Filter" },
  { q: "SELECT p.product_name, r.rating FROM products p INNER JOIN reviews r ON p.product_id=r.product_id WHERE r.rating BETWEEN 3 AND 5 ORDER BY r.rating ____;", a: "DESC", topic: "R3 BETWEEN" },
  { q: "SELECT o.order_id, c.customer_name FROM orders o INNER JOIN customers c ON o.customer_id=c.customer_id ____ o.order_id > 100;", a: "WHERE", topic: "R3 WHERE position" },
  { q: "SELECT c.customer_name, o.order_id FROM customers c LEFT JOIN orders o ON c.customer_id=o.customer_id ORDER BY c.customer_name ASC ____ 10;", a: "LIMIT", topic: "R3 LIMIT" },
  { q: "SELECT o.order_id, c.customer_name FROM orders o INNER JOIN customers c ON o.customer_id=c.customer_id WHERE c.customer_name LIKE 'A____';", a: "%", topic: "R3 LIKE %" },
  { q: "SELECT oi.order_id, p.product_name FROM order_items oi INNER JOIN products p ON oi.product_id=p.product_id WHERE p.product_name LIKE '%phone%' ____ p.product_name LIKE '%tablet%';", a: "OR", topic: "R3 LIKE OR" },
  { q: "SELECT o.order_id, SUM(oi.quantity) AS qty FROM orders o INNER JOIN order_items oi ON o.order_id=oi.order_id GROUP BY o.order_id ORDER BY qty ____;", a: "DESC", topic: "R3 Aggregate sort" },
  { q: "SELECT c.customer_name, o.order_id FROM customers c LEFT JOIN orders o ON c.customer_id=o.customer_id WHERE o.order_id IS NULL ORDER BY c.customer_name ____;", a: "ASC", topic: "R3 Unmatched sort" },
  { q: "SELECT p.product_name, COUNT(r.review_id) FROM products p LEFT JOIN reviews r ON p.product_id=r.product_id GROUP BY p.product_name HAVING COUNT(r.review_id) ____ 0;", a: ">", topic: "R3 LEFT + COUNT" }
];

let i = -1;

function normalize(s) {
  return (s ?? "")
    .trim()
    .replace(/\s+/g, " ")
    .toUpperCase();
}

function check() {
  if (i < 0) return;
  const user = normalize(document.getElementById("ans").value);
  const correct = normalize(questions[i].a);

  const result = document.getElementById("result");
  const explain = document.getElementById("explain");

  if (user === correct) {
    result.textContent = "✅ Correct";
    result.className = "chip ok";
    explain.style.display = "none";
  } else {
    result.textContent = "❌ Not quite";
    result.className = "chip bad";
    explain.style.display = "block";
    explain.textContent = "Correct answer: " + questions[i].a;
  }
}

function reveal() {
  if (i < 0) return;
  const explain = document.getElementById("explain");
  explain.style.display = "block";
  explain.textContent = "Correct answer: " + questions[i].a;
}

// Allow Enter key to submit
document.getElementById("ans").addEventListener("keydown", (e) => {
  if (e.key === "Enter") check();
});
</script>

</body>
</html>
